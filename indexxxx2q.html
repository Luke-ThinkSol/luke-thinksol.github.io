<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Project Workflow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: white;
            font-family: Arial, sans-serif;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        h1 {
            text-align: center;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Luke's ADHD-Optimised Project & Billing Workflow</h1>
    <div class="mermaid">
flowchart TD
    Start([Daily Work Begins]) --> Decision{What's happening?}
    
    %% NEW PROJECT PATH
    Decision -->|New project arrives| NewProj[Create Project in<br/>Projects Database]
    NewProj --> SetupProj[Set Client, Status=Active]
    SetupProj --> AddToggles[Add toggle headings for<br/>expected workstreams]
    AddToggles --> FirstLog[Click 'Log Work Session'<br/>template button]
    FirstLog --> LogDetails1[Fill: Time, Description<br/>✓ Tick 'Add to weekly kanban']
    LogDetails1 --> AppearsKanban1[Entry auto-appears<br/>in Billable Kanban]
    AppearsKanban1 --> Continue1([Ready for next task])
    
    %% QUICK BILLABLE ENTRY PATH
    Decision -->|Quick task/interruption<br/>5-30 min work| QuickPath{Is there a project<br/>for this?}
    QuickPath -->|Yes - existing project| OpenProj[Open Project page]
    QuickPath -->|No - ad-hoc work| DirectKanban[Add directly to<br/>Billable Kanban]
    DirectKanban --> KanbanDone1([Kanban entry created])
    
    OpenProj --> QuickLog[Click 'Log Work Session']
    QuickLog --> QuickFill[Fill: Time, Description<br/>✓ Tick 'Add to weekly kanban']
    QuickFill --> AutoKanban[Entry auto-appears<br/>in Billable Kanban]
    AutoKanban --> Continue2([Done - captured for billing])
    
    %% ONGOING PROJECT WORK PATH
    Decision -->|Continuing work on<br/>existing project| FindProj{How to find it?}
    FindProj -->|From 'This Week' filter| ThisWeek[Dashboard: Projects<br/>worked this week]
    FindProj -->|From Projects Database| AllProj[Browse all projects]
    FindProj -->|From Kanban entry| KanbanLink[Click linked project<br/>from kanban card]
    
    ThisWeek --> ProjectPage[Open Project Page]
    AllProj --> ProjectPage
    KanbanLink --> ProjectPage
    
    ProjectPage --> CheckContext[Read last Time Log entry<br/>to see where you left off]
    CheckContext --> WorkType{What work<br/>are you doing?}
    
    WorkType -->|Specific ongoing task| TaskToggle[Open relevant<br/>toggle heading]
    TaskToggle --> AddNotes[Add dated notes<br/>under toggle]
    AddNotes --> LogSession1[Click 'Log Work Session']
    
    WorkType -->|General project work| LogSession2[Click 'Log Work Session']
    
    WorkType -->|Discovered new workstream| NewToggle[Create new<br/>toggle heading]
    NewToggle --> AddNotes2[Add initial notes]
    AddNotes2 --> LogSession3[Click 'Log Work Session']
    
    LogSession1 --> FillLog[Fill Time Log:<br/>Time, Description]
    LogSession2 --> FillLog
    LogSession3 --> FillLog
    
    FillLog --> BillDecision{Billable?}
    BillDecision -->|Yes| TickKanban[✓ Tick 'Add to weekly kanban']
    BillDecision -->|No - internal/learning| NoTick[Leave unticked]
    
    TickKanban --> UpdateChecklist{Need to-do items?}
    NoTick --> UpdateChecklist
    
    UpdateChecklist -->|Yes| AddTodo[Update checklist section<br/>with next steps]
    UpdateChecklist -->|No| TickProject[✓ Tick 'This Week'<br/>on project]
    AddTodo --> TickProject
    
    TickProject --> SaveContext([Context saved.<br/>Kanban updated if billable.<br/>Ready for next task.])
    
    %% END OF WEEK WORKFLOW
    SaveContext -.Weekly.-> EOW([End of Week:<br/>Timesheet Time])
    EOW --> ViewKanban[Open Billable Kanban view]
    ViewKanban --> ReviewDone[Review all entries<br/>in 'In Progress' and 'Done']
    ReviewDone --> Timesheet[Transfer to<br/>company timesheet system]
    Timesheet --> ClearWeek[Untick 'Add to weekly kanban'<br/>OR filter to new week]
    ClearWeek --> ClearProject[Untick 'This Week'<br/>on all projects]
    ClearProject --> FreshStart([Fresh kanban for new week.<br/>All project context preserved.])
    
    %% STYLING
    classDef newProject fill:#4CAF50,stroke:#2E7D32,color:#fff
    classDef quickPath fill:#FF9800,stroke:#E65100,color:#fff
    classDef ongoingPath fill:#2196F3,stroke:#0D47A1,color:#fff
    classDef endWeek fill:#9C27B0,stroke:#4A148C,color:#fff
    classDef decision fill:#FFC107,stroke:#F57F17,color:#000
    
    class NewProj,SetupProj,AddToggles,FirstLog newProject
    class QuickPath,DirectKanban,OpenProj,QuickLog,QuickFill quickPath
    class FindProj,ProjectPage,CheckContext,TaskToggle,AddNotes,NewToggle ongoingPath
    class EOW,ViewKanban,ReviewDone,Timesheet,ClearWeek endWeek
    class Decision,QuickPath,WorkType,BillDecision,UpdateChecklist decision

    </div>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: { 
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
